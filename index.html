<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–∞–º–∞ –º–æ–∂–µ—Ç ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ #–º–∞–º–∞–º–æ–∂–µ—Ç</title>
  <meta name="color-scheme" content="light" />
  <style>
    /* =========================================================
       THEME & RESET (LIGHT ONLY)
    ========================================================= */
    :root{
      --bg:#fcfbfe;--bg-weak:#f6f5fc;--text:#1f1534;--muted:#6d6385;
      --primary:#7a3cff;--primary-weak:#ede6ff;--secondary:#16c7c3;--secondary-weak:#dff7f6;
      --accent:#ff7ab6;
      --card:#fff;--border:#eceafd;--radius:16px;--gap:16px;--maxw:1200px;
      --shadow:0 12px 30px rgba(18,6,43,.06);--shadow-2:0 6px 18px rgba(18,6,43,.06);
      --focus:0 0 0 3px rgba(122,60,255,.15);
      --glass:rgba(255,255,255,.7);
      --success:#22c55e;--danger:#e54848;--warning:#f5a524;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, color-mix(in oklab, var(--primary) 12%, transparent) 0%, transparent 60%),
        radial-gradient(1000px 500px at 110% 10%, color-mix(in oklab, var(--secondary) 10%, transparent) 0%, transparent 50%),
        linear-gradient(180deg,var(--bg) 0%, color-mix(in oklab, var(--bg) 80%, #fff) 100%);
      background-attachment: fixed;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block;border-radius:14px}
    button{font:inherit;cursor:pointer}
    :focus-visible{outline:none;box-shadow:var(--focus);border-radius:8px}
    .container{max-width:var(--maxw);margin-inline:auto;padding:0 20px}
    .grid{display:grid;gap:var(--gap)}
    .muted{color:var(--muted)}
    h1,h2,h3{margin:0}

    /* =========================================================
       HEADER + PROGRESS BAR + NAV (NO DARK MODE)
    ========================================================= */
    .progress{position:fixed;inset:0 0 auto 0;height:3px;background:linear-gradient(90deg,var(--primary),var(--secondary));
      transform-origin:0 50%;transform:scaleX(0);z-index:80;box-shadow:var(--shadow-2)}
    header{position:sticky;top:0;z-index:70;background:rgba(255,255,255,.75);
      backdrop-filter:blur(10px);border-bottom:1px solid var(--border);transition:box-shadow .25s ease}
    header.scrolled{box-shadow:0 8px 24px rgba(18,6,43,.08)}
    .nav{display:flex;align-items:center;gap:16px;padding:10px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .brand__logo{width:36px;height:36px;border-radius:10px;box-shadow:var(--shadow-2);position:relative;overflow:hidden}
    .brand__logo::before{content:"";position:absolute;inset:-40% -40%;background:conic-gradient(from 0deg, var(--primary), var(--secondary), var(--accent), var(--primary));animation:spinSlow 8s linear infinite}
    .brand__logo::after{content:"";position:absolute;inset:3px;border-radius:8px;background:var(--card);border:1px solid var(--border)}
    @keyframes spinSlow{to{transform:rotate(360deg)}}

    .nav__links{display:flex;gap:8px;flex-wrap:wrap}
    .nav__links a{padding:8px 10px;border-radius:10px;color:var(--muted);transition:background .2s, transform .2s}
    .nav__links a:hover{background:var(--primary-weak);color:var(--primary);transform:translateY(-1px)}
    .nav__actions{margin-left:auto;display:flex;align-items:center;gap:8px}

    .btn{background:var(--primary);color:#fff;border:0;border-radius:12px;padding:10px 14px;box-shadow:var(--shadow-2);transition:transform .08s, box-shadow .25s}
    .btn:hover{transform:translateY(-1px);box-shadow:0 10px 22px color-mix(in oklab, var(--primary) 30%, #000 0%)}
    .btn:active{transform:translateY(0)}
    .btn--ghost{background:transparent;color:var(--primary);border:1px solid var(--primary-weak)}
    .btn--subtle{background:transparent;border:1px solid var(--border);color:var(--text)}
    .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;font-size:12px;background:var(--primary-weak);color:var(--primary)}

    /* Burger button (RIGHT) */
    .burger{display:none;--size:40px;width:var(--size);height:var(--size);border-radius:10px;border:1px solid var(--border);background:var(--card);align-items:center;justify-content:center}
    .burger span{position:relative;display:block;width:18px;height:2px;background:#3b2a66}
    .burger span::before,.burger span::after{content:"";position:absolute;left:0;width:100%;height:2px;background:#3b2a66;transition:transform .25s ease, top .25s ease}
    .burger span::before{top:-6px}
    .burger span::after{top:6px}
    .burger[aria-expanded="true"] span{background:transparent}
    .burger[aria-expanded="true"] span::before{top:0;transform:rotate(45deg)}
    .burger[aria-expanded="true"] span::after{top:0;transform:rotate(-45deg)}

    /* Mobile drawer */
    .drawer{position:fixed;inset:0 0 0 auto;width:min(86vw,360px);background:rgba(255,255,255,.96);
      backdrop-filter:blur(10px);box-shadow:-10px 0 30px rgba(18,6,43,.12);transform:translateX(100%);transition:transform .3s ease;z-index:75;padding:16px}
    .drawer.open{transform:translateX(0)}
    .drawer a{display:block;padding:12px;border-radius:10px;color:var(--text)}
    .drawer a:hover{background:var(--primary-weak);color:var(--primary)}

    /* =========================================================
       HERO + WAVES + BADGES
    ========================================================= */
    .hero{padding:72px 0 36px;position:relative;overflow:hidden}
    .hero__wrap{display:grid;gap:18px}
    .hero__title{font-size:clamp(28px,4.5vw,48px);line-height:1.1;font-weight:900;letter-spacing:.2px}
    .hero__subtitle{color:var(--muted);font-size:clamp(14px,2vw,18px)}
    .hero__cta{display:flex;gap:10px;flex-wrap:wrap}
    .badge-float{position:absolute;right:6%;top:14%;display:grid;gap:10px}
    .badge-float .chip{backdrop-filter:blur(6px);background:var(--glass)}

    /* subtle animated waves */
    .waves{position:absolute;inset:auto 0 0 0;height:120px;overflow:hidden;pointer-events:none}
    .wave{position:absolute;left:0;right:0;height:120px;background:
      radial-gradient(1200px 80px at 10% 100%, color-mix(in oklab, var(--primary) 20%, transparent), transparent 70%),
      radial-gradient(900px 80px at 90% 100%, color-mix(in oklab, var(--secondary) 18%, transparent), transparent 70%);
      animation:drift 8s ease-in-out infinite alternate;opacity:.6}
    @keyframes drift{from{transform:translateY(0)}to{transform:translateY(10px)}}

    /* =========================================================
       SECTIONS, CARDS, STICKY FILTERS, SKELETONS
    ========================================================= */
    section{scroll-margin-top:82px;padding:40px 0}
    .section__head{display:flex;align-items:end;justify-content:space-between;gap:10px;margin-bottom:14px}
    h2{font-size:clamp(22px,3.2vw,32px)}

    .filterbar{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px;position:sticky;top:72px;z-index:60;background:color-mix(in oklab, var(--card) 92%, transparent);border:1px solid var(--border);padding:8px;border-radius:12px;backdrop-filter:blur(6px)}
    .input,select{border:1px solid var(--border);background:var(--card);padding:10px 12px;border-radius:12px;min-width:160px;color:var(--text)}
    .center{display:grid;place-items:center}.mt-12{margin-top:12px}

    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;opacity:0;transform:translateY(8px);transition:opacity .35s ease, transform .35s ease, box-shadow .25s ease}
    .card.reveal{opacity:1;transform:none}
    .card:hover{box-shadow:0 12px 32px rgba(18,6,43,.12)}

    /* skeletons */
    .skeleton{position:relative;overflow:hidden;background:color-mix(in oklab, var(--card) 70%, #aaa 30%);border-radius:10px}
    .skeleton::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);animation:shimmer 1.2s infinite}
    @keyframes shimmer{to{transform:translateX(100%)}}
    .s-card{padding:14px;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .s-line{height:14px;margin:8px 0}
    .s-badge{height:22px;width:80px;border-radius:999px}

    .price{font-weight:800}

    /* =========================================================
       FOOTER
    ========================================================= */
    footer{background:#0f1020;color:#e6e0ff;margin-top:24px;padding:28px 0}
    footer a{color:#b9f3f1}

    /* =========================================================
       USER DROPDOWN + MODAL + TOASTS
    ========================================================= */
    .user{position:relative}
    .user__btn{display:flex;align-items:center;gap:8px;background:transparent;border:1px solid var(--border);color:var(--text);border-radius:999px;padding:6px 10px}
    .user__menu{position:absolute;right:0;top:calc(100% + 8px);background:var(--card);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:8px;display:none;min-width:180px}
    .user[open] .user__menu{display:block}
    .menu__item{display:block;padding:8px 10px;border-radius:8px;background:transparent;border:0;width:100%;text-align:left;color:var(--text)}
    .menu__item:hover{background:color-mix(in oklab, var(--primary-weak) 60%, transparent)}

    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(15,9,34,.42);z-index:90}
    .modal[open]{display:grid}
    .modal__dialog{width:min(420px,92vw);background:var(--card);border-radius:18px;box-shadow:var(--shadow);padding:16px;animation:pop .2s ease;border:1px solid var(--border)}
    .modal__title{margin:0 0 8px 0;font-size:22px}
    .form{display:grid;gap:10px}.row{display:grid;gap:10px}
    .error{color:var(--danger);font-size:13px;display:none}.error[show]{display:block}
    .spinner{width:18px;height:18px;border:2px solid #ddd;border-top-color:var(--primary);border-radius:50%;animation:spin .7s linear infinite;display:none}
    .spinner[show]{display:inline-block}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes pop{from{transform:scale(.98);opacity:0}to{transform:scale(1);opacity:1}}

    /* Toast */
    .toast{position:fixed;right:16px;bottom:16px;display:grid;gap:8px;z-index:95}
    .toast__item{background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);padding:10px 12px;border-radius:12px;animation:slideIn .25s ease}
    @keyframes slideIn{from{transform:translateY(8px);opacity:0}to{transform:none;opacity:1}}

    /* Back to top */
    .totop{position:fixed;right:16px;bottom:20px;z-index:85;display:none}
    .totop.show{display:block}

    /* =========================================================
       EXTRA BLOCKS: REVIEWS & FAQ
    ========================================================= */
    .reviews{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .review{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
    .review__head{display:flex;align-items:center;gap:10px}
    .review__avatar{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--secondary))}
    .stars{letter-spacing:2px}

    details.faq{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px 12px}
    details.faq+details.faq{margin-top:10px}
    details.faq[open]{box-shadow:var(--shadow)}

    /* =========================================================
       RESPONSIVE
    ========================================================= */
    @media (max-width: 980px){
      .nav__links{display:none}
      .burger{display:flex}
    }
    @media (max-width: 560px){
      .hero{padding:54px 0 24px}
      .hero__title{font-size:clamp(24px,7vw,32px)}
      .hero__cta{display:grid;grid-template-columns:1fr;gap:8px}
      .btn,.btn--ghost,.btn--subtle{width:100%}
      .cards{grid-template-columns:1fr}
      .filterbar{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:6px}
      .filterbar > *{flex:0 0 auto}
      .container{padding:0 12px}
    }
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important}
    }
    /* Mobile drawer scroll lock */
    body.noscroll{overflow:hidden}
  </style>
</head>
<body>
  <div class="progress" id="progress"></div>

  <header>
    <div class="container nav" role="navigation" aria-label="–ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
      <div class="brand" aria-label="#–º–∞–º–∞–º–æ–∂–µ—Ç">
        <div class="brand__logo" aria-hidden="true"></div>
        <div>–ú–∞–º–∞ –º–æ–∂–µ—Ç <span class="muted">#–º–∞–º–∞–º–æ–∂–µ—Ç</span></div>
      </div>

      <nav class="nav__links" aria-label="–°–µ–∫—Ü–∏–∏">
        <a href="#courses">–ö—É—Ä—Å—ã</a>
        <a href="#market">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
        <a href="#jobs">–í–∞–∫–∞–Ω—Å–∏–∏</a>
        <a href="#grants">–ì—Ä–∞–Ω—Ç—ã</a>
        <a href="#support">–ü–æ–º–æ—â—å</a>
        <a href="#about">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
      </nav>

      <div class="nav__actions">
        <button class="btn btn--ghost" id="btn-login">–í–æ–π—Ç–∏</button>
        <button class="btn" id="btn-join" onclick="document.querySelector('[href=\'#courses\']').click()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
        <details class="user" id="user-area" style="display:none">
          <summary class="user__btn"><span id="user-login"></span><span class="chip" id="user-role"></span></summary>
          <div class="user__menu">
            <a class="menu__item" href="#profile">–ü—Ä–æ—Ñ–∏–ª—å</a>
            <button class="menu__item" id="btn-logout">–í—ã–π—Ç–∏</button>
          </div>
        </details>
        <!-- Burger stays on the RIGHT -->
        <button class="burger" id="burger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" aria-expanded="false" aria-controls="drawer"><span></span></button>
      </div>
    </div>
  </header>

  <!-- Mobile drawer -->
  <aside class="drawer" id="drawer" aria-hidden="true">
    <nav>
      <a href="#courses">–ö—É—Ä—Å—ã</a>
      <a href="#market">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
      <a href="#jobs">–í–∞–∫–∞–Ω—Å–∏–∏</a>
      <a href="#grants">–ì—Ä–∞–Ω—Ç—ã</a>
      <a href="#support">–ü–æ–º–æ—â—å</a>
      <a href="#about">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
    </nav>
  </aside>

  <main>
    <section class="hero container" id="home">
      <div class="hero__wrap">
        <h1 class="hero__title">–ú–ê–ú–ê “ö–û–õ–´–ù–ê–ù –ë”ò–†–Ü –ö–ï–õ–ï–î–Ü ‚Äî –ï–ì–ï–† –ñ–ê–ù–´–ù–î–ê –°–ï–ù–ï–¢–Ü–ù–î–ï–† –ë–û–õ–°–ê‚Ä¶</h1>
        <p class="hero__subtitle">–°–æ—Ü–∏–∞–ª—å–Ω–æ‚Äë–¥–µ–ª–æ–≤–∞—è –æ–Ω–ª–∞–π–Ω‚Äë–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–∞–º: –æ–±—É—á–µ–Ω–∏–µ, —É–¥–∞–ª—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.</p>
        <div class="hero__cta">
          <a class="btn" href="#courses">–ö—É—Ä—Å—ã</a>
          <a class="btn btn--ghost" href="#market">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
          <a class="btn btn--ghost" href="#jobs">–í–∞–∫–∞–Ω—Å–∏–∏</a>
        </div>
        <div class="badge-float" aria-hidden="true">
          <span class="chip">üéì –û–±—É—á–µ–Ω–∏–µ</span>
          <span class="chip">üíº –†–∞–±–æ—Ç–∞</span>
          <span class="chip">ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
        </div>
        <div class="waves"><div class="wave"></div></div>
      </div>
    </section>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –º–µ—Ç—Ä–∏–∫–∏ -->
    <section id="stats">
      <div class="container">
        <div class="cards">
          <article class="card reveal"><h3>5000+</h3><div class="muted">—É—á–∞—Å—Ç–Ω–∏—Ü —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</div></article>
          <article class="card reveal"><h3>120+</h3><div class="muted">–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</div></article>
          <article class="card reveal"><h3>60+</h3><div class="muted">–≥—Ä–∞–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–≥—Ä–∞–º–º</div></article>
          <article class="card reveal"><h3>30+</h3><div class="muted">–∫—É—Ä—Å–æ–≤ –∏ –º–∞—Å—Ç–µ—Ä‚Äë–∫–ª–∞—Å—Å–æ–≤</div></article>
        </div>
      </div>
    </section>

    <!-- –ö–£–†–°–´ -->
    <section id="courses">
      <div class="container">
        <div class="section__head">
          <h2>–ö—É—Ä—Å—Ç–∞—Ä</h2>
          <div class="muted" id="courses-count">0</div>
        </div>
        <div class="filterbar">
          <input class="input" id="course-search" placeholder="–Ü–∑–¥–µ—É" />
          <select id="course-tag"></select>
          <select id="course-sort">
            <option value="rating">–†–µ–π—Ç–∏–Ω–≥ –±–æ–π—ã–Ω—à–∞</option>
            <option value="price">–ë–∞“ì–∞ –±–æ–π—ã–Ω—à–∞</option>
            <option value="duration">“∞–∑–∞“õ—Ç—ã“ì—ã –±–æ–π—ã–Ω—à–∞</option>
          </select>
          <button class="btn btn--subtle" id="course-dir" aria-pressed="false" title="–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">‚Üë</button>
        </div>
        <div class="cards" id="courses-list"></div>
        <div class="center mt-12"><button class="btn btn--ghost" id="courses-more">–¢–∞“ì—ã –∫”©—Ä—Å–µ—Ç—É</button></div>
      </div>
    </section>

    <!-- –ú–ê–†–ö–ï–¢ -->
    <section id="market">
      <div class="container">
        <div class="section__head">
          <h2>–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h2>
          <div class="muted" id="market-count">0</div>
        </div>
        <div class="filterbar">
          <input class="input" id="market-search" placeholder="–Ü–∑–¥–µ—É" />
          <select id="market-type"></select>
          <select id="market-sort">
            <option value="price">–ë–∞“ì–∞ –±–æ–π—ã–Ω—à–∞</option>
            <option value="title">–ê—Ç–∞—É—ã –±–æ–π—ã–Ω—à–∞</option>
          </select>
          <button class="btn btn--subtle" id="market-dir" aria-pressed="false">‚Üë</button>
          <button class="btn" id="market-add">–•–∞–±–∞—Ä–ª–∞–Ω–¥—ã—Ä—É “õ–æ—Å—É</button>
        </div>
        <div class="cards" id="market-list"></div>
        <div class="center mt-12"><button class="btn btn--ghost" id="market-more">–¢–∞“ì—ã –∫”©—Ä—Å–µ—Ç—É</button></div>
      </div>
    </section>

    <!-- –í–ê–ö–ê–ù–°–ò–ò -->
    <section id="jobs">
      <div class="container">
        <div class="section__head">
          <h2>–í–∞–∫–∞–Ω—Å–∏–∏ / –ë–∏—Ä–∂–∞</h2>
          <div class="muted" id="jobs-count">0</div>
        </div>
        <div class="filterbar">
          <input class="input" id="jobs-search" placeholder="–ü–æ–∏—Å–∫" />
          <select id="jobs-sort">
            <option value="deadline">–ü–æ –¥–µ–¥–ª–∞–π–Ω—É</option>
            <option value="sum">–ü–æ –æ–ø–ª–∞—Ç–µ</option>
            <option value="title">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
          </select>
          <button class="btn btn--subtle" id="jobs-dir" aria-pressed="false">‚Üë</button>
        </div>
        <div class="cards" id="jobs-list"></div>
        <div class="center mt-12"><button class="btn btn--ghost" id="jobs-more">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button></div>
      </div>
    </section>

    <!-- –ì–†–ê–ù–¢–´ -->
    <section id="grants">
      <div class="container">
        <div class="section__head">
          <h2>–ì—Ä–∞–Ω—Ç—Ç–∞—Ä</h2>
          <div class="muted" id="grants-count">0</div>
        </div>
        <div class="filterbar">
          <input class="input" id="grants-search" placeholder="–Ü–∑–¥–µ—É" />
          <select id="grants-sort">
            <option value="deadline">–î–µ–¥–ª–∞–π–Ω –±–æ–π—ã–Ω—à–∞</option>
            <option value="sum" selected>–°–æ–º–∞ –±–æ–π—ã–Ω—à–∞</option>
            <option value="title">–ê—Ç–∞—É—ã –±–æ–π—ã–Ω—à–∞</option>
          </select>
          <button class="btn btn--subtle" id="grants-dir" aria-pressed="false">‚Üë</button>
        </div>
        <div class="cards" id="grants-list"></div>
        <div class="center mt-12"><button class="btn btn--ghost" id="grants-more">–¢–∞“ì—ã –∫”©—Ä—Å–µ—Ç—É</button></div>
      </div>
    </section>

    <!-- –ü–û–î–î–ï–†–ñ–ö–ê -->
    <section id="support">
      <div class="container">
        <div class="section__head"><h2>–ö”©–º–µ–∫</h2></div>
        <div class="cards" id="support-list"></div>
      </div>
    </section>

    <!-- –û–¢–ó–´–í–´ -->
    <section id="reviews">
      <div class="container">
        <div class="section__head"><h2>–û—Ç–∑—ã–≤—ã</h2></div>
        <div class="reviews">
          <article class="review">
            <div class="review__head">
              <div class="review__avatar" aria-hidden="true"></div>
              <div><strong>–ê–π–≥–µ—Ä–∏–º</strong><div class="muted">–ê–ª–º–∞—Ç—ã</div></div>
            </div>
            <div class="muted stars" aria-label="–†–µ–π—Ç–∏–Ω–≥: 5 –∏–∑ 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <p>–ù–∞—à–ª–∞ –ø–µ—Ä–≤—É—é —É–¥–∞–ª—ë–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É. –£–¥–æ–±–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ!</p>
          </article>
          <article class="review">
            <div class="review__head">
              <div class="review__avatar" aria-hidden="true"></div>
              <div><strong>–ú–∞—Ä–∏–Ω–∞</strong><div class="muted">–®—ã–º–∫–µ–Ω—Ç</div></div>
            </div>
            <div class="muted stars" aria-label="–†–µ–π—Ç–∏–Ω–≥: 5 –∏–∑ 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <p>–ö—É—Ä—Å—ã –ø–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É –æ–∫–∞–∑–∞–ª–∏—Å—å –æ—á–µ–Ω—å –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–º–∏. –°–ø–∞—Å–∏–±–æ –∫–æ–º–∞–Ω–¥–µ!</p>
          </article>
          <article class="review">
            <div class="review__head">
              <div class="review__avatar" aria-hidden="true"></div>
              <div><strong>–î–∏–Ω–∞—Ä–∞</strong><div class="muted">–ê—Å—Ç–∞–Ω–∞</div></div>
            </div>
            <div class="muted stars" aria-label="–†–µ–π—Ç–∏–Ω–≥: 4 –∏–∑ 5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            <p>–ì—Ä–∞–Ω—Ç–æ–≤ –º–Ω–æ–≥–æ –∏ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç–ª–∏—á–Ω–æ ‚Äî –±—ã—Å—Ç—Ä–æ –Ω–∞—à–ª–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq">
      <div class="container">
        <div class="section__head"><h2>FAQ</h2></div>
        <details class="faq">
          <summary><strong>–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –≥—Ä–∞–Ω—Ç?</strong></summary>
          <p class="muted">–û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª ¬´–ì—Ä–∞–Ω—Ç—Ç–∞—Ä¬ª, –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ —Å—É–º–º–µ/–¥–µ–¥–ª–∞–π–Ω—É –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–∞—Ç—å¬ª –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ.</p>
        </details>
        <details class="faq">
          <summary><strong>–ù—É–∂–Ω–∞ –ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é?</strong></summary>
          <p class="muted">–î–∞, –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ ¬´–í–æ–π—Ç–∏¬ª ‚Äî –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–Ω–æ–ø–∫–∞ ¬´–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è¬ª –æ—Ç–ø—Ä–∞–≤–∏—Ç –∑–∞—è–≤–∫—É.</p>
        </details>
        <details class="faq">
          <summary><strong>–û—Ç–∫—É–¥–∞ –¥–∞–Ω–Ω—ã–µ?</strong></summary>
          <p class="muted">–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ Google Sheets –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞—Ö–æ–¥–µ.</p>
        </details>
      </div>
    </section>

    <!-- –û –ü–†–û–ï–ö–¢–ï -->
    <section id="about">
      <div class="container">
        <div class="section__head"><h2>–û –ø—Ä–æ–µ–∫—Ç–µ</h2></div>
        <div class="cards">
          <article class="card reveal">
            <h3>–ú–∏—Å—Å–∏—è</h3>
            <div class="muted">–î–∞—Ç—å –º–∞–º–∞–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é, —É–¥–∞–ª—ë–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É.</div>
          </article>
          <article class="card reveal">
            <h3>–¶–µ–Ω–Ω–æ—Å—Ç–∏</h3>
            <div class="muted">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —É–≤–∞–∂–µ–Ω–∏–µ, —Ä–æ—Å—Ç, –∏–Ω–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç—å, –≤–∑–∞–∏–º–æ–ø–æ–º–æ—â—å.</div>
          </article>
          <article class="card reveal">
            <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <div class="muted">–í—ã–±–∏—Ä–∞–π—Ç–µ –∫—É—Ä—Å—ã, –ø—É–±–ª–∏–∫—É–π—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏ —É—Å–ª—É–≥–∏ –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ, –æ—Ç–∫–ª–∏–∫–∞–π—Ç–µ—Å—å –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏ –∏ –≥—Ä–∞–Ω—Ç—ã.</div>
          </article>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <strong>–ú–∞–º–∞ –º–æ–∂–µ—Ç</strong> ¬∑ <span>#–º–∞–º–∞–º–æ–∂–µ—Ç</span>
      <div class="muted">Email: mamamojet@gmail.com ¬∑ Tel: +7 775 388 2202</div>
    </div>
  </footer>

  <!-- LOGIN MODAL -->
  <dialog class="modal" id="modal-login" aria-labelledby="login-title" aria-modal="true">
    <div class="modal__dialog">
      <h3 class="modal__title" id="login-title">–í—Ö–æ–¥</h3>
      <form class="form" id="login-form">
        <div class="row">
          <input class="input" name="login" id="login-phone" inputmode="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–±–µ–∑ +)" autocomplete="username" required />
          <input class="input" name="pass" id="login-pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="current-password" required />
        </div>
        <div class="error" id="login-error">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</div>
        <div style="display:flex;justify-content:flex-end;gap:8px">
          <button type="button" class="btn btn--ghost" data-close>–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn"><span class="spinner" id="login-spin"></span><span>–í–æ–π—Ç–∏</span></button>
        </div>
      </form>
    </div>
  </dialog>

  <!-- TOASTS & TO-TOP -->
  <div class="toast" id="toast" aria-live="polite" aria-atomic="true"></div>
  <button class="btn totop" id="totop" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

  <script>
    /* ===================== CONFIG ===================== */
    const CONFIG = {
      spreadsheetId: '1najoTh6IacXwU_se-9de-KMlZ7XQ5F64d0P1rdlMXTQ',
      sheets: { users:'–Æ–∑–µ—Ä—ã', courses:'–ö—É—Ä—Å—ã', market:'–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å', jobs:'–í–∞–∫–∞–Ω—Å–∏–∏', grants:'–ì—Ä–∞–Ω—Ç—ã', support:'–ü–æ–¥–¥–µ—Ä–∂–∫–∞' }
    };

    /* UTILITIES */
    const $ = sel => document.querySelector(sel);
    const $$ = sel => [...document.querySelectorAll(sel)];
    const app = { users:[], data:{courses:[], market:[], jobs:[], grants:[], support:[]}, user:null, pagers:{} };

    function toast(msg, timeout=2200){
      const box = $('#toast'); const el = document.createElement('div');
      el.className = 'toast__item'; el.textContent = msg; box.appendChild(el);
      setTimeout(()=>{ el.style.opacity='0'; el.style.transform='translateY(6px)'; setTimeout(()=>el.remove(),220); }, timeout);
    }

    function unique(arr){ return [...new Set(arr.filter(Boolean))]; }
    function fillSelectOptions(selectEl, values, firstLabel='–ë–∞—Ä–ª—ã“ì—ã'){
      if(!selectEl) return;
      const opts = [`<option value="">${firstLabel}</option>`].concat(values.map(v => `<option value="${v}">${v}</option>`));
      selectEl.innerHTML = opts.join('');
    }
    function toggleDir(btn){
      const now = btn.getAttribute('aria-pressed')==='true';
      btn.setAttribute('aria-pressed', String(!now));
      btn.textContent = !now ? '‚Üì' : '‚Üë';
    }

    /* Smooth anchor scroll & drawer close */
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[href^="#"]');
      if(!a) return;
      const id = a.getAttribute('href');
      const el = document.querySelector(id);
      if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); closeDrawer(); }
    });

    /* Header shadow on scroll + progress + toTop */
    const header = document.querySelector('header');
    const progress = $('#progress');
    const totop = $('#totop');
    function onScroll(){
      const y = window.scrollY;
      header.classList.toggle('scrolled', y>10);
      const h = document.documentElement.scrollHeight - window.innerHeight;
      const p = h>0 ? (y / h) : 0; progress.style.transform = `scaleX(${p})`;
      totop.classList.toggle('show', y>500);
    }
    document.addEventListener('scroll', onScroll);
    totop.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

    /* Burger & drawer */
    const burger = document.getElementById('burger');
    const drawer = document.getElementById('drawer');
    function openDrawer(){drawer.classList.add('open');drawer.setAttribute('aria-hidden','false');burger.setAttribute('aria-expanded','true');document.body.classList.add('noscroll');}
    function closeDrawer(){drawer.classList.remove('open');drawer.setAttribute('aria-hidden','true');burger.setAttribute('aria-expanded','false');document.body.classList.remove('noscroll');}
    burger.addEventListener('click', ()=>{ drawer.classList.contains('open') ? closeDrawer() : openDrawer(); });
    drawer.addEventListener('click', (e)=>{ if(e.target.matches('a')) closeDrawer(); });

    /* Reveal on scroll for cards */
    const revealIO = new IntersectionObserver((entries)=>{
      entries.forEach(ent=>{ if(ent.isIntersecting){ ent.target.classList.add('reveal'); revealIO.unobserve(ent.target); } });
    },{threshold:.12});

    /* Fetch from Google Sheets */
    async function fetchSheet(sheet){
      const url = `https://docs.google.com/spreadsheets/d/${CONFIG.spreadsheetId}/gviz/tq?sheet=${encodeURIComponent(sheet)}&tqx=out:json`;
      const res = await fetch(url,{cache:'no-store'});
      const txt = await res.text();
      const json = JSON.parse(txt.slice(txt.indexOf('{'), txt.lastIndexOf('}')+1));
      const cols = json.table.cols.map(c => (c.label||'').trim());
      return json.table.rows.map(r=>{
        const row={}; r.c?.forEach((cell,i)=> row[cols[i]] = cell && cell.v!=null ? String(cell.v).trim() : '');
        return row;
      });
    }

    /* ===================== AUTH (same logic + UX) ===================== */
    const modalLogin = document.getElementById('modal-login');
    const btnLogin = document.getElementById('btn-login');
    const userArea = document.getElementById('user-area');
    const userLogin = document.getElementById('user-login');
    const userRole  = document.getElementById('user-role');

    function openModal(m){ m.showModal(); }
    function closeModal(m){ m.close(); }

    btnLogin.addEventListener('click', ()=> openModal(modalLogin));
    modalLogin.addEventListener('click', e=> { if(e.target.hasAttribute('data-close') || e.target===modalLogin) closeModal(modalLogin); });

    function phoneMask(value){ return value.replace(/\D/g,'').slice(0,12); }

    async function initAuth(){
      app.users = await fetchSheet(CONFIG.sheets.users);
      const saved = localStorage.getItem('mm_user');
      if(saved){ app.user = JSON.parse(saved); showUser(); }
    }

    function showUser(){
      if(!app.user){
        btnLogin.style.display='';
        document.getElementById('btn-join').style.display='';
        userArea.style.display='none';
        return;
      }
      btnLogin.style.display='none';
      document.getElementById('btn-join').style.display='none'; // —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞
      userArea.style.display='block';
      userLogin.textContent = app.user.login;
      userRole.textContent = app.user.role || '';
      toast('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!');
    }

    document.getElementById('btn-logout').addEventListener('click', ()=>{
      app.user=null; localStorage.removeItem('mm_user'); showUser(); toast('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞');
    });

    document.getElementById('login-form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const spin = document.getElementById('login-spin');
      const err = document.getElementById('login-error');
      err.removeAttribute('show'); spin.setAttribute('show','');

      const login = phoneMask(document.getElementById('login-phone').value);
      const pass  = document.getElementById('login-pass').value;

      setTimeout(()=>{
        const u = app.users.find(x => x['–õ–æ–≥–∏–Ω']===login && x['–ü–∞—Ä–æ–ª—å']===pass);
        spin.removeAttribute('show');
        if(!u){ err.setAttribute('show',''); return; }
        app.user = {login, role: u['–†–æ–ª—å']||''};
        localStorage.setItem('mm_user', JSON.stringify(app.user));
        showUser(); closeModal(modalLogin);
      }, 400);
    });

    /* ===================== SKELETON HELPERS ===================== */
    function skeletonCards(containerId, count=6){
      const list = document.getElementById(containerId);
      list.innerHTML = '';
      for(let i=0;i<count;i++){
        const el = document.createElement('article');
        el.className='s-card';
        el.innerHTML = `
          <div class="skeleton s-badge"></div>
          <div class="skeleton s-line" style="width:70%"></div>
          <div class="skeleton s-line" style="width:40%"></div>
          <div class="skeleton s-line" style="width:55%"></div>`;
        list.appendChild(el);
      }
    }

    /* ===================== COURSES ===================== */
    async function loadCourses(){
      skeletonCards('courses-list', 6);
      const rows = await fetchSheet(CONFIG.sheets.courses);
      app.data.courses = rows.map(r=>({
        id: crypto.randomUUID(),
        tag: r['–∫–∞—Ç–µ–≥–æ—Ä–∏—è']||'',
        title: r['–Ω–∞–∑–≤–∞–Ω–∏–µ']||'',
        duration: Number(r['–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']||0),
        price: Number(r['—Å—Ç–æ–∏–º–æ—Å—Ç—å']||0),
        rating: Number(r['—Ä–µ–π—Ç–∏–Ω–≥']||0),
        more: r['–ø–æ–¥—Ä–æ–±–Ω–µ–µ']||''
      }));

      const catValues = unique(app.data.courses.map(c=>c.tag));
      fillSelectOptions(document.getElementById('course-tag'), catValues, '–ë–∞—Ä–ª—ã“ì—ã');

      renderCourses();
    }
    function renderCourses(){
      const q = (document.getElementById('course-search').value||'').toLowerCase();
      const tag = document.getElementById('course-tag').value||'';
      const sortKey = document.getElementById('course-sort').value;
      const desc = document.getElementById('course-dir').getAttribute('aria-pressed')==='true';

      let arr = app.data.courses.filter(c => (!tag || c.tag===tag) && (!q || c.title.toLowerCase().includes(q)));
      arr.sort((a,b)=>{
        const v = sortKey==='rating' ? (a.rating-b.rating)
                : sortKey==='price' ? (a.price-b.price)
                : (a.duration-b.duration);
        return desc ? -v : v;
      });

      document.getElementById('courses-count').textContent = String(arr.length);
      const list = document.getElementById('courses-list'); list.innerHTML='';
      arr.forEach(c=>{
        const el = document.createElement('article');
        el.className='card';
        el.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
            <div class="chip">${c.tag||'‚Äî'}</div>
            <div class="muted" title="–†–µ–π—Ç–∏–Ω–≥">‚ú® ${c.rating||0}</div>
          </div>
          <h3>${c.title}</h3>
          <div class="muted">${c.duration||0} –Ω–µ–¥.</div>
          <div class="price">${c.price? new Intl.NumberFormat('ru-RU').format(c.price)+' ‚Ç∏':'–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--ghost">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="btn btn--subtle">–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
          </div>`;
        el.querySelector('.btn').addEventListener('click', ()=>{
          if(!app.user){ openModal(modalLogin); return; }
          alert(c.more || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–∑–∂–µ');
        });
        el.querySelector('.btn--subtle').addEventListener('click', ()=> toast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ'));
        list.appendChild(el); revealIO.observe(el);
      });
    }
    document.getElementById('course-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderCourses(); });
    ['course-search','course-tag','course-sort'].forEach(id=> document.getElementById(id).addEventListener('input', renderCourses));
    document.getElementById('courses-more').addEventListener('click', ()=> toast('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –∫—É—Ä—Å—ã'));

    /* ===================== MARKET ===================== */
    async function loadMarket(){
      skeletonCards('market-list', 6);
      const rows = await fetchSheet(CONFIG.sheets.market);
      app.data.market = rows.map(r=>({
        id: crypto.randomUUID(),
        type: r['–∫–∞—Ç–µ–≥–æ—Ä–∏–π']||'',
        title: r['–Ω–∞–∑–≤–∞–Ω–∏–µ']||'',
        price: Number(r['—Å—Ç–æ–∏–º–æ—Å—Ç—å']||0),
        seller: (r['–∏–º—è/–≥–æ—Ä–æ–¥']||'').split('/')[0]||'',
        location: (r['–∏–º—è/–≥–æ—Ä–æ–¥']||'').split('/')[1]||'',
        contact: r['—Å–≤—è–∑–∞—Ç—å—Å—è']||''
      }));

      const types = unique(app.data.market.map(m=>m.type));
      fillSelectOptions(document.getElementById('market-type'), types, '–ë–∞—Ä–ª—ã“ì—ã');

      renderMarket();
    }
    function renderMarket(){
      const q = (document.getElementById('market-search').value||'').toLowerCase();
      const type = document.getElementById('market-type').value||'';
      const sortKey = document.getElementById('market-sort').value;
      const desc = document.getElementById('market-dir').getAttribute('aria-pressed')==='true';

      let arr = app.data.market.filter(m=> (!type || m.type===type) && (!q || m.title.toLowerCase().includes(q)));
      arr.sort((a,b)=>{
        let v = sortKey==='price' ? (a.price-b.price) : (''+a.title).localeCompare(b.title);
        return desc ? -v : v;
      });

      document.getElementById('market-count').textContent = String(arr.length);
      const list = document.getElementById('market-list'); list.innerHTML='';
      arr.forEach(m=>{
        const el=document.createElement('article'); el.className='card';
        el.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
            <div class="chip">${m.type||'‚Äî'}</div>
            <div class="muted">${[m.seller,m.location].filter(Boolean).join(' ¬∑ ')}</div>
          </div>
          <h3>${m.title}</h3>
          <div class="price">${new Intl.NumberFormat('ru-RU').format(m.price)} ‚Ç∏</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--ghost">–°–≤—è–∑–∞—Ç—å—Å—è</button>
            <button class="btn btn--subtle">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>`;
        el.querySelector('.btn').addEventListener('click', ()=>{
          if(!m.contact){ alert('–ö–æ–Ω—Ç–∞–∫—Ç –Ω–µ —É–∫–∞–∑–∞–Ω'); return; }
          if(m.contact.startsWith('@')) location.href = 'https://t.me/'+m.contact.slice(1);
          else if(m.contact.replace(/\D/g,'').length>=10) location.href = 'https://wa.me/'+m.contact.replace(/\D/g,'');
          else location.href = m.contact;
        });
        el.querySelector('.btn--subtle').addEventListener('click', ()=> toast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ'));
        list.appendChild(el); revealIO.observe(el);
      });
    }
    document.getElementById('market-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderMarket(); });
    ['market-search','market-type','market-sort'].forEach(id=> document.getElementById(id).addEventListener('input', renderMarket));
    document.getElementById('market-more').addEventListener('click', ()=> toast('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è'));
    document.getElementById('market-add').addEventListener('click', ()=> toast('–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–∑–∂–µ'));

    /* ===================== JOBS ===================== */
    async function loadJobs(){
      skeletonCards('jobs-list', 6);
      const rows = await fetchSheet(CONFIG.sheets.jobs);
      app.data.jobs = rows.map(r=>({
        id: crypto.randomUUID(),
        cat: r['–∫–∞—Ç–µ–≥–æ—Ä–∏—è']||'',
        title: r['–Ω–∞–∑–≤–∞–Ω–∏–µ']||'',
        company: r['–∫–æ–º–ø–∞–Ω–∏—è']||'',
        deadline: r['–¥–µ–¥–ª–∞–π–Ω']||'',
        sum: Number(r['—Å—É–º–º–∞']||0)
      }));
      renderJobs();
    }
    function renderJobs(){
      const q=(document.getElementById('jobs-search').value||'').toLowerCase();
      const sortKey=document.getElementById('jobs-sort').value;
      const desc=document.getElementById('jobs-dir').getAttribute('aria-pressed')==='true';

      let arr = app.data.jobs.filter(j=> (!q || j.title.toLowerCase().includes(q) || j.company.toLowerCase().includes(q)));
      arr.sort((a,b)=>{
        let v = 0;
        if(sortKey==='deadline') v = new Date(a.deadline)-new Date(b.deadline);
        else if(sortKey==='sum') v = a.sum-b.sum;
        else v = (''+a.title).localeCompare(b.title);
        return desc ? -v : v;
      });

      document.getElementById('jobs-count').textContent=String(arr.length);
      const list=document.getElementById('jobs-list'); list.innerHTML='';
      arr.forEach(j=>{
        const el=document.createElement('article'); el.className='card';
        el.innerHTML=`
          <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;">
            <div class="chip">${j.cat||'‚Äî'}</div>
            <div class="muted">–î–µ–¥–ª–∞–π–Ω: ${j.deadline||'‚Äî'}</div>
          </div>
          <h3>${j.title}</h3>
          <div class="muted">${j.company||'‚Äî'}</div>
          <div class="price">${j.sum? new Intl.NumberFormat('ru-RU').format(j.sum)+' ‚Ç∏':'‚Äî'}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--ghost">–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>
            <button class="btn btn--subtle">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>`;
        el.querySelector('.btn').addEventListener('click', ()=>{
          if(!app.user){ openModal(modalLogin); return; }
          toast('–û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–¥–µ–º–æ)');
        });
        el.querySelector('.btn--subtle').addEventListener('click', ()=> toast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ'));
        list.appendChild(el); revealIO.observe(el);
      });
    }
    document.getElementById('jobs-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderJobs(); });
    ['jobs-search','jobs-sort'].forEach(id=> document.getElementById(id).addEventListener('input', renderJobs));
    document.getElementById('jobs-more').addEventListener('click', ()=> toast('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –≤–∞–∫–∞–Ω—Å–∏–∏'));

    /* ===================== GRANTS ===================== */
    async function loadGrants(){
      skeletonCards('grants-list', 6);
      const rows = await fetchSheet(CONFIG.sheets.grants);
      app.data.grants = rows.map(r=>({
        id: crypto.randomUUID(),
        title: r['–Ω–∞–∑–≤–∞–Ω–∏–µ']||'',
        company: r['–∫–æ–º–ø–∞–Ω–∏—è']||'',
        sum: Number(r['—Å—É–º–º–∞']||0),
        deadline: r['–¥–µ–¥–ª–∞–π–Ω']||'',
        req: r['—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è']||''
      }));

      document.getElementById('grants-sort').value = 'sum';
      renderGrants();
    }
    function renderGrants(){
      const q=(document.getElementById('grants-search').value||'').toLowerCase();
      const sortKey=document.getElementById('grants-sort').value;
      const desc=document.getElementById('grants-dir').getAttribute('aria-pressed')==='true';

      let arr = app.data.grants.filter(g=> (!q || g.title.toLowerCase().includes(q) || g.company.toLowerCase().includes(q)));
      arr.sort((a,b)=>{
        let v=0;
        if(sortKey==='deadline') v = new Date(a.deadline)-new Date(b.deadline);
        else if(sortKey==='sum') v = a.sum-b.sum;
        else v = (''+a.title).localeCompare(b.title);
        return desc ? -v : v;
      });

      document.getElementById('grants-count').textContent=String(arr.length);
      const list=document.getElementById('grants-list'); list.innerHTML='';
      arr.forEach(g=>{
        const el=document.createElement('article'); el.className='card';
        el.innerHTML=`
          <h3>${g.title}</h3>
          <div class="muted">${g.company||'‚Äî'}</div>
          <div class="price">${g.sum? new Intl.NumberFormat('ru-RU').format(g.sum)+' ‚Ç∏':'‚Äî'}</div>
          <div class="muted">–î–µ–¥–ª–∞–π–Ω: ${g.deadline||'‚Äî'}</div>
          <div class="muted">${g.req||''}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn btn--ghost">–ü–æ–¥–∞—Ç—å</button>
            <button class="btn btn--subtle">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>`;
        el.querySelector('.btn').addEventListener('click', ()=>{
          if(!app.user){ openModal(modalLogin); return; }
          toast('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (–¥–µ–º–æ)');
        });
        el.querySelector('.btn--subtle').addEventListener('click', ()=> toast('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ'));
        list.appendChild(el); revealIO.observe(el);
      });
    }
    document.getElementById('grants-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderGrants(); });
    ['grants-search','grants-sort'].forEach(id=> document.getElementById(id).addEventListener('input', renderGrants));
    document.getElementById('grants-more').addEventListener('click', ()=> toast('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –≤—Å–µ –≥—Ä–∞–Ω—Ç—ã'));

    /* ===================== SUPPORT ===================== */
    async function loadSupport(){
      skeletonCards('support-list', 4);
      const rows = await fetchSheet(CONFIG.sheets.support);
      app.data.support = rows.map(r=>({
        expert: r['—ç–∫—Å–ø–µ—Ä—Ç']||'',
        desc: r['–æ–ø–∏—Å–∞–Ω–∏–µ']||'',
        contact: r['—Å–≤—è–∑–∞—Ç—å—Å—è']||''
      }));
      const list=document.getElementById('support-list'); list.innerHTML='';
      app.data.support.forEach(s=>{
        const el=document.createElement('article'); el.className='card';
        el.innerHTML=`<div class="chip">${s.expert||'‚Äî'}</div><div class="muted">${s.desc||''}</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:6px">
            <button class="btn btn--ghost">–°–≤—è–∑–∞—Ç—å—Å—è</button>
          </div>`;
        el.querySelector('button').addEventListener('click', ()=>{
          if(s.contact.startsWith('@')) location.href='https://t.me/'+s.contact.slice(1);
          else if(s.contact.replace(/\D/g,'').length>=10) location.href='https://wa.me/'+s.contact.replace(/\D/g,'');
          else if(s.contact) location.href=s.contact;
        });
        list.appendChild(el); revealIO.observe(el);
      });
    }

    /* DIR buttons */
    document.getElementById('market-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderMarket(); });
    document.getElementById('jobs-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderJobs(); });
    document.getElementById('grants-dir').addEventListener('click', e=>{ toggleDir(e.currentTarget); renderGrants(); });

    /* INIT */
    (async function init(){
      onScroll(); // set initial progress/toTop
      // initial skeletons
      skeletonCards('courses-list', 6);
      skeletonCards('market-list', 6);
      skeletonCards('jobs-list', 6);
      skeletonCards('grants-list', 6);
      skeletonCards('support-list', 4);

      await initAuth();
      await Promise.all([loadCourses(), loadMarket(), loadJobs(), loadGrants(), loadSupport()]);
    })();
  </script>
</body>
</html>